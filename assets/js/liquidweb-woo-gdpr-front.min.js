function setAccountNotification(e,t){var o="";o+='<div class="lw-woo-gdpr-notice lw-woo-gdpr-notice-'+e+'">',o+="<p>"+t+"</p>",o+="</div>",jQuery(".lw-woo-account-notices").html(o),scrollToMessage(),jQuery(".lw-woo-gdpr-notice").delay(5e3).fadeOut("slow",function(){jQuery(this).remove()})}function scrollToMessage(){return jQuery("html,body").animate({scrollTop:jQuery(".lw-woo-account-notices").offset().top-60},500),!1}function clearAllCheckboxes(e){jQuery(e).each(function(){jQuery(this).find("input:checkbox").prop("checked",!1)})}jQuery(document).ready(function(e){e.fn.divExists=function(e){var t=[].slice.call(arguments,1);return this.length&&e.call(this,t),this};var t=frontLWWooGDPR.ajaxurl,o="div.lw-woo-gdpr-download-section";e("div.lw-woo-gdpr-section").divExists(function(){e("form.lw-woo-gdpr-changeopt-form").submit(function(o){o.preventDefault();var r=e("input#lw_woo_gdpr_changeopt_nonce").val();if(""===r||void 0===r)return!1;var a={action:"lw_woo_update_user_optins",user_id:e("input#lw_woo_gdpr_data_changeopt_user").val(),optins:e("ul.lw-woo-gdpr-optin-list input:checked").map(function(){return this.id}).get(),nonce:r};jQuery.post(t,a,function(t){if(""!==t.data.message&&setAccountNotification(!0!==t.success?"error":"success",t.data.message),!0!==t.success)return!1;""!==t.data.markup&&e("ul.lw-woo-gdpr-optin-list").empty().append(t.data.markup)},"json")}),e("form.lw-woo-gdpr-export-form").submit(function(r){r.preventDefault();var a=e("input#lw_woo_gdpr_export_nonce").val();if(""===a||void 0===a)return!1;var n={action:"lw_woo_request_user_exports",user_id:e("input#lw_woo_gdpr_data_export_user").val(),exports:e("ul.lw-woo-gdpr-export-options input:checked").map(function(){return this.value}).get(),nonce:a};jQuery.post(t,n,function(t){if(""!==t.data.message&&setAccountNotification(!0!==t.success?"error":"success",t.data.message),!0!==t.success)return!1;""!==t.data.markup&&(clearAllCheckboxes("li.lw-woo-gdpr-export-option"),e(o).replaceWith(t.data.markup))},"json")}),e(o).on("click","a.lw-woo-gdpr-delete-link",function(r){r.preventDefault();var a=e(this).data("nonce");if(""===a||void 0===a)return!1;var n={action:"lw_woo_delete_export_file",user_id:e(this).data("user-id"),datatype:e(this).data("type"),nonce:a};jQuery.post(t,n,function(t){if(""!==t.data.message&&setAccountNotification(!0!==t.success?"error":"success",t.data.message),!0!==t.success)return!1;""!==t.data.markup&&e(o).find(t.data.markup).remove()},"json")}),e("div.lw-woo-gdpr-data-delete-section").on("click","a.lw-woo-gdpr-cancel-request-link",function(o){o.preventDefault();var r=e(this).data("nonce");if(""===r||void 0===r)return!1;var a={action:"lw_woo_cancel_delete_request",user_id:e(this).data("user-id"),datatype:e(this).data("type"),nonce:r};jQuery.post(t,a,function(t){if(""!==t.data.message&&setAccountNotification(!0!==t.success?"error":"success",t.data.message),!0!==t.success)return!1;""!==t.data.markup&&e("ul.lw-woo-gdpr-delete-options").empty().append(t.data.markup.requests)},"json")}),e("form.lw-woo-gdpr-delete-me-form").submit(function(o){o.preventDefault();var r=e("input#lw_woo_gdpr_delete_nonce").val();if(""===r||void 0===r)return!1;var a={action:"lw_woo_request_user_deletion",user_id:e("input#lw_woo_gdpr_data_delete_user").val(),deletes:e("ul.lw-woo-gdpr-delete-options input:checked").map(function(){return this.value}).get(),nonce:r};jQuery.post(t,a,function(t){if(""!==t.data.message&&setAccountNotification(!0!==t.success?"error":"success",t.data.message),!0!==t.success)return!1;""!==t.data.markup&&(clearAllCheckboxes("li.lw-woo-gdpr-delete-option"),e("ul.lw-woo-gdpr-delete-options").empty().append(t.data.markup.requests)),!0!==t.data.markup.remaining&&e("p.lw-woo-gdpr-delete-submit").empty().append("<em>"+frontLWWooGDPR.remain_text+"</em>")},"json")})})});